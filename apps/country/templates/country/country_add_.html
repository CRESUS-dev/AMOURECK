{% extends 'sidebar.html' %}

{% block main %}
<main>
                    <div class="container-fluid px-4">
                        <h2 class="mt-4">Création de pays</h2>

                        <hr>
                        <div class="row justify-content-center">
                          <div class="col-md-6">
                            <form  id="customerForm" method="post" class="shadow p-4 bg-light rounded">
                                {% csrf_token %}
                            <div class="mb-3">
                                {{ form.name.label_tag }}
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <div class="text-danger">
                                        {{ form.name.errors }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="mb-3">
                                {{ form.iso_code.label_tag }}
                                {{ form.iso_code }}
                                {% if form.iso_code.errors %}
                                    <div class="text-danger">
                                        {{ form.iso_code.errors }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="mb-3">
                                {{ form.currency.label_tag }}
                                {{ form.currency }}
                                {% if form.currency.errors %}
                                    <div class="text-danger">
                                        {{ form.currency.errors }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="mb-3">
                                {{ form.is_active.label_tag }}
                                {{ form.is_active }}
                                {% if form.is_active.errors %}
                                    <div class="text-danger">
                                        {{ form.is_active.errors }}
                                    </div>
                                {% endif %}
                            </div>





                    <button type="submit" class="btn  text-light w-100" style="background: #04414d">Enregistrer</button>

                            {% for error in form.non_field_errors %}
        <div style="color: red;">{{ error }}</div>
    {% endfor %}
                            </form>

                        </div>
                    </div>
                    </div>

<script>

    // Validation personnalisée
    document.addEventListener("DOMContentLoaded", function () {
        const phoneInput = document.querySelector("#id_phone_number");
        const emailInput = document.querySelector("#id_email");

        // Vérification numéro de téléphone (format international simple)
        phoneInput.addEventListener("input", function () {
            const regex = /^\+?\d{8,15}$/;
            if (!regex.test(phoneInput.value)) {
                phoneInput.setCustomValidity("Numéro invalide. Exemple : +33612345678");
            } else {
                phoneInput.setCustomValidity("");
            }
        });

        // Vérification email
        emailInput.addEventListener("input", function () {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailInput.value && !regex.test(emailInput.value)) {
                emailInput.setCustomValidity("Adresse email invalide.");
            } else {
                emailInput.setCustomValidity("");
            }
        });
    });
</script>
                </main>

{% endblock main %}






